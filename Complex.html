<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Complex Explorer - Interactive Learning for CIE A-Level Further Mathematics</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/3.2.0/es5/tex-mml-chtml.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background: linear-gradient(135deg, #0f2027, #203a43, #2c5364);
            color: #fff;
            min-height: 100vh;
            padding: 20px;
            overflow-x: hidden;
        }
        
        .container {
            max-width: 1400px;
            margin: 0 auto;
        }
        
        header {
            text-align: center;
            padding: 40px 0;
            margin-bottom: 30px;
            position: relative;
        }
        
        .title-container {
            position: relative;
            display: inline-block;
        }
        
        h1 {
            font-size: 3.2rem;
            margin-bottom: 10px;
            text-shadow: 2px 2px 8px rgba(0, 0, 0, 0.5);
            background: linear-gradient(45deg, #00b4db, #0083b0, #00ccff);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            position: relative;
            z-index: 2;
        }
        
        .subtitle {
            font-size: 1.4rem;
            opacity: 0.9;
            max-width: 800px;
            margin: 0 auto;
            line-height: 1.6;
            color: #e0e0e0;
        }
        
        .hero {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 20px;
            padding: 30px;
            margin-bottom: 40px;
            text-align: center;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
        }
        
        .hero p {
            font-size: 1.2rem;
            margin-bottom: 20px;
            line-height: 1.6;
        }
        
        .explore-btn {
            background: linear-gradient(45deg, #00b4db, #0083b0);
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 50px;
            cursor: pointer;
            font-weight: 600;
            font-size: 1.1rem;
            transition: all 0.3s ease;
            box-shadow: 0 6px 20px rgba(0, 0, 0, 0.3);
            margin: 10px;
        }
        
        .explore-btn:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.4);
        }
        
        .content {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
            margin-bottom: 40px;
        }
        
        @media (max-width: 1100px) {
            .content {
                grid-template-columns: 1fr;
            }
        }
        
        .card {
            background: rgba(255, 255, 255, 0.08);
            backdrop-filter: blur(10px);
            border-radius: 15px;
            padding: 25px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.2);
            border: 1px solid rgba(255, 255, 255, 0.15);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }
        
        .card:hover {
            transform: translateY(-5px);
            box-shadow: 0 12px 35px rgba(0, 0, 0, 0.3);
        }
        
        .card h2 {
            font-size: 1.8rem;
            margin-bottom: 20px;
            color: #00ccff;
            border-bottom: 2px solid rgba(255, 255, 255, 0.2);
            padding-bottom: 10px;
        }
        
        .complex-plane-container {
            position: relative;
            width: 100%;
            height: 400px;
            border-radius: 10px;
            overflow: hidden;
            background: rgba(0, 0, 0, 0.2);
        }
        
        .complex-plane {
            width: 100% !important;
            height: 100% !important;
        }
        
        .controls {
            margin-top: 20px;
        }
        
        .control-group {
            margin-bottom: 15px;
        }
        
        label {
            display: block;
            margin-bottom: 8px;
            font-weight: 500;
            color: #e0e0e0;
        }
        
        input[type="range"] {
            width: 100%;
            margin-bottom: 5px;
            -webkit-appearance: none;
            height: 8px;
            border-radius: 5px;
            background: rgba(255, 255, 255, 0.1);
            outline: none;
        }
        
        input[type="range"]::-webkit-slider-thumb {
            -webkit-appearance: none;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: #00b4db;
            cursor: pointer;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);
        }
        
        .value-display {
            display: flex;
            justify-content: space-between;
            font-size: 0.9rem;
            opacity: 0.8;
        }
        
        .operations {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            margin-top: 20px;
        }
        
        button {
            background: linear-gradient(45deg, #00b4db, #0083b0);
            color: white;
            border: none;
            padding: 12px 20px;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
        }
        
        button:hover {
            transform: translateY(-3px);
            box-shadow: 0 6px 20px rgba(0, 0, 0, 0.3);
        }
        
        .math-display {
            background: rgba(0, 0, 0, 0.2);
            padding: 15px;
            border-radius: 8px;
            margin-top: 20px;
            font-size: 1.1rem;
            text-align: center;
            min-height: 60px;
            display: flex;
            align-items: center;
            justify-content: center;
            flex-direction: column;
        }
        
        .explanation {
            line-height: 1.6;
            margin-top: 20px;
        }
        
        .explanation p {
            margin-bottom: 15px;
        }
        
        footer {
            text-align: center;
            padding: 20px;
            margin-top: 40px;
            border-top: 1px solid rgba(255, 255, 255, 0.2);
            font-size: 0.9rem;
            opacity: 0.8;
        }
        
        .complex-number {
            font-size: 1.2rem;
            font-weight: bold;
            color: #00ccff;
        }
        
        .transformed {
            color: #ffcc00;
        }
        
        .example {
            background: rgba(255, 255, 255, 0.1);
            padding: 15px;
            border-radius: 8px;
            margin-top: 15px;
        }
        
        .example h3 {
            color: #00ccff;
            margin-bottom: 10px;
        }
        
        .modules {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 20px;
            margin-top: 30px;
            margin-bottom: 30px;
        }
        
        @media (max-width: 900px) {
            .modules {
                grid-template-columns: 1fr;
            }
        }
        
        .module-card {
            background: rgba(255, 255, 255, 0.08);
            border-radius: 15px;
            padding: 20px;
            text-align: center;
            transition: all 0.3s ease;
            cursor: pointer;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .module-card:hover {
            background: rgba(255, 255, 255, 0.12);
            transform: translateY(-5px);
        }
        
        .module-card.active-module {
            background: rgba(0, 180, 219, 0.2);
            border-color: #00b4db;
            box-shadow: 0 8px 25px rgba(0, 180, 219, 0.3);
        }
        
        .module-icon {
            font-size: 2.5rem;
            margin-bottom: 15px;
            color: #00b4db;
        }
        
        .module-card h3 {
            margin-bottom: 10px;
            color: #00ccff;
        }
        
        .quiz-container {
            margin-top: 20px;
            padding: 20px;
            background: rgba(0, 0, 0, 0.2);
            border-radius: 10px;
        }
        
        .quiz-question {
            margin-bottom: 15px;
            font-size: 1.1rem;
        }
        
        .quiz-options {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
        }
        
        .quiz-option {
            padding: 10px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 5px;
            cursor: pointer;
            transition: all 0.2s ease;
        }
        
        .quiz-option:hover {
            background: rgba(255, 255, 255, 0.15);
        }
        
        .quiz-option.correct {
            background: rgba(76, 175, 80, 0.3);
            border: 1px solid #4caf50;
        }
        
        .quiz-option.incorrect {
            background: rgba(244, 67, 54, 0.3);
            border: 1px solid #f44336;
        }
        
        .animation-controls {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin-top: 20px;
            flex-wrap: wrap;
        }
        
        .pulse {
            animation: pulse 2s infinite;
        }
        
        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }
        
        .hidden {
            display: none;
        }
        
        .discovery-panel {
            background: rgba(0, 0, 0, 0.3);
            padding: 20px;
            border-radius: 10px;
            margin-top: 20px;
        }
        
        .discovery-item {
            margin-bottom: 15px;
            padding: 10px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 5px;
            border-left: 4px solid #00b4db;
        }
        
        .module-content {
            display: none;
        }
        
        .module-content.active {
            display: block;
        }
        
        .visualization-content {
            display: block;
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <div class="title-container">
                <h1>Complex Explorer</h1>
                <div class="subtitle">An Interactive Journey into the World of Complex Numbers</div>
            </div>
        </header>
        
        <div class="hero">
            <p>Welcome to <strong>Complex Explorer</strong>, your interactive guide to understanding complex numbers through visualization and discovery.</p>
            <p>Explore the beauty of complex arithmetic, transformations, and their geometric interpretations.</p>
            <div>
                <button class="explore-btn pulse" id="startExploring">Start Exploring</button>
                <button class="explore-btn" id="takeTour">Take Guided Tour</button>
            </div>
        </div>
        
        <div class="modules">
            <div class="module-card active-module" data-module="visualization">
                <div class="module-icon">üìä</div>
                <h3>Visualization Lab</h3>
                <p>Explore complex numbers on the Argand diagram</p>
            </div>
            <div class="module-card" data-module="operations">
                <div class="module-icon">üî¢</div>
                <h3>Operations Playground</h3>
                <p>Experiment with complex arithmetic</p>
            </div>
            <div class="module-card" data-module="discovery">
                <div class="module-icon">üîç</div>
                <h3>Discovery Zone</h3>
                <p>Uncover patterns and properties</p>
            </div>
        </div>
        
        <!-- Visualization Module -->
        <div class="module-content visualization-content active">
            <div class="content">
                <div class="card">
                    <h2>Complex Plane Explorer</h2>
                    <div class="complex-plane-container">
                        <canvas id="complexPlane" class="complex-plane"></canvas>
                    </div>
                    
                    <div class="controls">
                        <div class="control-group">
                            <label for="realPart">Real Part (a): <span id="realValue">2.0</span></label>
                            <input type="range" id="realPart" min="-5" max="5" step="0.1" value="2">
                        </div>
                        
                        <div class="control-group">
                            <label for="imagPart">Imaginary Part (b): <span id="imagValue">1.5</span></label>
                            <input type="range" id="imagPart" min="-5" max="5" step="0.1" value="1.5">
                        </div>
                        
                        <div class="operations">
                            <button id="add">Addition (z + w)</button>
                            <button id="multiply">Multiplication (z √ó w)</button>
                            <button id="conjugate">Conjugate</button>
                            <button id="reset">Reset</button>
                        </div>
                        
                        <div class="animation-controls">
                            <button id="rotate90">Rotate 90¬∞</button>
                            <button id="rotate180">Rotate 180¬∞</button>
                            <button id="scale2">Scale 2x</button>
                            <button id="reflectX">Reflect in Real Axis</button>
                        </div>
                    </div>
                    
                    <div class="math-display">
                        <div>
                            <p>Current Complex Number: <span class="complex-number" id="currentComplex">2.0 + 1.5i</span></p>
                            <p>Transformation Result: <span class="complex-number transformed" id="transformedComplex">-</span></p>
                        </div>
                    </div>
                </div>
                
                <div class="card">
                    <h2>Complex Number Theory</h2>
                    <div class="explanation">
                        <p>A complex number is expressed in the form <span class="complex-number">a + bi</span>, where:</p>
                        <ul>
                            <li><span class="complex-number">a</span> is the real part</li>
                            <li><span class="complex-number">b</span> is the imaginary part</li>
                            <li><span class="complex-number">i</span> is the imaginary unit satisfying <span class="complex-number">i¬≤ = -1</span></li>
                        </ul>
                        
                        <p>On the complex plane, the horizontal axis represents the real part and the vertical axis represents the imaginary part. Each complex number corresponds to a point in the plane.</p>
                        
                        <div class="example">
                            <h3>Geometric Interpretation of Operations</h3>
                            <p><strong>Addition</strong>: Corresponds to vector addition using the parallelogram law</p>
                            <p><strong>Multiplication</strong>: Moduli multiply, arguments add</p>
                            <p><strong>Conjugate</strong>: Reflection about the real axis</p>
                        </div>
                    </div>
                    
                    <div class="quiz-container" id="quizContainer">
                        <h3>Quick Quiz</h3>
                        <div class="quiz-question" id="quizQuestion">What is the geometric interpretation of multiplying a complex number by i?</div>
                        <div class="quiz-options">
                            <div class="quiz-option" data-correct="true">Rotation by 90¬∞ counterclockwise</div>
                            <div class="quiz-option" data-correct="false">Reflection about the real axis</div>
                            <div class="quiz-option" data-correct="false">Scaling by a factor of 2</div>
                            <div class="quiz-option" data-correct="false">Translation to the right</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Operations Module -->
        <div class="module-content operations-content">
            <div class="content">
                <div class="card">
                    <h2>Complex Operations Playground</h2>
                    <div class="complex-plane-container">
                        <canvas id="operationsPlane" class="complex-plane"></canvas>
                    </div>
                    
                    <div class="controls">
                        <div class="control-group">
                            <label for="opRealPart">Real Part (a): <span id="opRealValue">2.0</span></label>
                            <input type="range" id="opRealPart" min="-5" max="5" step="0.1" value="2">
                        </div>
                        
                        <div class="control-group">
                            <label for="opImagPart">Imaginary Part (b): <span id="opImagValue">1.5</span></label>
                            <input type="range" id="opImagPart" min="-5" max="5" step="0.1" value="1.5">
                        </div>
                        
                        <div class="operations">
                            <button id="opAdd">Addition</button>
                            <button id="opSubtract">Subtraction</button>
                            <button id="opMultiply">Multiplication</button>
                            <button id="opDivide">Division</button>
                        </div>
                    </div>
                    
                    <div class="math-display">
                        <div>
                            <p>z = <span class="complex-number" id="opCurrentComplex">2.0 + 1.5i</span></p>
                            <p>w = <span class="complex-number" id="opWComplex">1.0 + 1.0i</span></p>
                            <p>Result: <span class="complex-number transformed" id="opResultComplex">-</span></p>
                        </div>
                    </div>
                </div>
                
                <div class="card">
                    <h2>Advanced Operations</h2>
                    <div class="explanation">
                        <p>Explore more complex operations and their geometric interpretations:</p>
                        
                        <div class="example">
                            <h3>Complex Division</h3>
                            <p>Division of complex numbers involves multiplying numerator and denominator by the conjugate of the denominator:</p>
                            <p>\( \frac{a+bi}{c+di} = \frac{(a+bi)(c-di)}{c^2+d^2} \)</p>
                        </div>
                        
                        <div class="example">
                            <h3>Powers and Roots</h3>
                            <p>De Moivre's Theorem: \( (r(\cos\theta + i\sin\theta))^n = r^n(\cos n\theta + i\sin n\theta) \)</p>
                            <p>This makes calculating powers and roots of complex numbers much easier.</p>
                        </div>
                        
                        <div class="example">
                            <h3>Complex Exponentiation</h3>
                            <p>Euler's Formula: \( e^{i\theta} = \cos\theta + i\sin\theta \)</p>
                            <p>This leads to the polar form: \( z = re^{i\theta} \)</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Discovery Module -->
        <div class="module-content discovery-content">
            <div class="card">
                <h2>Discovery Zone</h2>
                <div class="discovery-panel">
                    <div class="discovery-item">
                        <h3>Pattern Discovery: Powers of i</h3>
                        <p>Explore what happens when you raise i to different powers. Try calculating i¬≤, i¬≥, i‚Å¥, and so on. What pattern do you notice?</p>
                        <button class="explore-btn" id="explorePowers">Explore Powers of i</button>
                        <div id="powersResult" class="math-display" style="margin-top: 10px; display: none;"></div>
                    </div>
                    
                    <div class="discovery-item">
                        <h3>Investigation: Complex Conjugates</h3>
                        <p>Multiply a complex number by its conjugate. What type of number do you always get? Why does this happen?</p>
                        <button class="explore-btn" id="exploreConjugates">Investigate Conjugates</button>
                        <div id="conjugatesResult" class="math-display" style="margin-top: 10px; display: none;"></div>
                    </div>
                    
                    <div class="discovery-item">
                        <h3>Challenge: Complex Roots</h3>
                        <p>Find the square roots of various complex numbers. How many square roots does a complex number have? Where are they located on the complex plane?</p>
                        <button class="explore-btn" id="exploreRoots">Find Complex Roots</button>
                        <div id="rootsResult" class="math-display" style="margin-top: 10px; display: none;"></div>
                    </div>
                </div>
            </div>
        </div>
        
        <footer>
            <p>Complex Explorer - Interactive Learning Tool for CIE A-Level Further Mathematics | Designed to enhance understanding of complex numbers through exploration</p>
        </footer>
    </div>

    <script>
        // Complex Number Class
        class ComplexNumber {
            constructor(real, imag) {
                this.real = real;
                this.imag = imag;
            }
            
            add(other) {
                return new ComplexNumber(this.real + other.real, this.imag + other.imag);
            }
            
            subtract(other) {
                return new ComplexNumber(this.real - other.real, this.imag - other.imag);
            }
            
            multiply(other) {
                const real = this.real * other.real - this.imag * other.imag;
                const imag = this.real * other.imag + this.imag * other.real;
                return new ComplexNumber(real, imag);
            }
            
            divide(other) {
                const denominator = other.real * other.real + other.imag * other.imag;
                const real = (this.real * other.real + this.imag * other.imag) / denominator;
                const imag = (this.imag * other.real - this.real * other.imag) / denominator;
                return new ComplexNumber(real, imag);
            }
            
            conjugate() {
                return new ComplexNumber(this.real, -this.imag);
            }
            
            modulus() {
                return Math.sqrt(this.real * this.real + this.imag * this.imag);
            }
            
            argument() {
                return Math.atan2(this.imag, this.real);
            }
            
            toString() {
                const realStr = this.real.toFixed(2);
                const imagStr = Math.abs(this.imag).toFixed(2);
                const sign = this.imag >= 0 ? '+' : '-';
                return `${realStr} ${sign} ${imagStr}i`;
            }
        }

        // Initialize complex numbers for visualization module
        let z = new ComplexNumber(2, 1.5);
        let w = new ComplexNumber(1, 1);
        let transformed = null;

        // Initialize complex numbers for operations module
        let opZ = new ComplexNumber(2, 1.5);
        let opW = new ComplexNumber(1, 1);
        let opResult = null;

        // Draw the complex plane for visualization module
        function drawComplexPlane() {
            const canvas = document.getElementById('complexPlane');
            const ctx = canvas.getContext('2d');
            
            // Set proper canvas dimensions
            canvas.width = canvas.offsetWidth;
            canvas.height = canvas.offsetHeight;
            
            const width = canvas.width;
            const height = canvas.height;
            const centerX = width / 2;
            const centerY = height / 2;
            const scale = Math.min(width, height) / 10; // Dynamic scaling
            
            // Clear canvas
            ctx.clearRect(0, 0, width, height);
            
            // Draw grid
            ctx.strokeStyle = 'rgba(255, 255, 255, 0.2)';
            ctx.lineWidth = 1;
            
            // Vertical lines
            for (let x = centerX % scale; x < width; x += scale) {
                ctx.beginPath();
                ctx.moveTo(x, 0);
                ctx.lineTo(x, height);
                ctx.stroke();
            }
            
            // Horizontal lines
            for (let y = centerY % scale; y < height; y += scale) {
                ctx.beginPath();
                ctx.moveTo(0, y);
                ctx.lineTo(width, y);
                ctx.stroke();
            }
            
            // Draw axes
            ctx.strokeStyle = 'rgba(255, 255, 255, 0.8)';
            ctx.lineWidth = 2;
            
            // Real axis (x-axis)
            ctx.beginPath();
            ctx.moveTo(0, centerY);
            ctx.lineTo(width, centerY);
            ctx.stroke();
            
            // Imaginary axis (y-axis)
            ctx.beginPath();
            ctx.moveTo(centerX, 0);
            ctx.lineTo(centerX, height);
            ctx.stroke();
            
            // Draw origin
            ctx.fillStyle = 'white';
            ctx.beginPath();
            ctx.arc(centerX, centerY, 4, 0, Math.PI * 2);
            ctx.fill();
            
            // Draw complex number z
            const zX = centerX + z.real * scale;
            const zY = centerY - z.imag * scale;
            
            ctx.fillStyle = '#00ccff';
            ctx.beginPath();
            ctx.arc(zX, zY, 6, 0, Math.PI * 2);
            ctx.fill();
            
            // Draw line from origin to z
            ctx.strokeStyle = '#00ccff';
            ctx.lineWidth = 2;
            ctx.beginPath();
            ctx.moveTo(centerX, centerY);
            ctx.lineTo(zX, zY);
            ctx.stroke();
            
            // Label z
            ctx.fillStyle = '#00ccff';
            ctx.font = '14px Arial';
            ctx.fillText('z', zX + 10, zY - 10);
            ctx.fillText(z.toString(), zX + 10, zY + 5);
            
            // If transformation exists, draw the transformed complex number
            if (transformed) {
                const tX = centerX + transformed.real * scale;
                const tY = centerY - transformed.imag * scale;
                
                ctx.fillStyle = '#ffcc00';
                ctx.beginPath();
                ctx.arc(tX, tY, 6, 0, Math.PI * 2);
                ctx.fill();
                
                // Draw line from origin to transformed result
                ctx.strokeStyle = '#ffcc00';
                ctx.lineWidth = 2;
                ctx.beginPath();
                ctx.moveTo(centerX, centerY);
                ctx.lineTo(tX, tY);
                ctx.stroke();
                
                // Label transformed result
                ctx.fillStyle = '#ffcc00';
                ctx.font = '14px Arial';
                ctx.fillText('z\'', tX + 10, tY - 10);
                ctx.fillText(transformed.toString(), tX + 10, tY + 5);
            }
            
            // Draw second complex number w for operations
            const wX = centerX + w.real * scale;
            const wY = centerY - w.imag * scale;
            
            ctx.fillStyle = '#ff66aa';
            ctx.beginPath();
            ctx.arc(wX, wY, 6, 0, Math.PI * 2);
            ctx.fill();
            
            // Label w
            ctx.fillStyle = '#ff66aa';
            ctx.font = '14px Arial';
            ctx.fillText('w', wX + 10, wY - 10);
            ctx.fillText(w.toString(), wX + 10, wY + 5);
        }

        // Draw the complex plane for operations module
        function drawOperationsPlane() {
            const canvas = document.getElementById('operationsPlane');
            const ctx = canvas.getContext('2d');
            
            // Set proper canvas dimensions
            canvas.width = canvas.offsetWidth;
            canvas.height = canvas.offsetHeight;
            
            const width = canvas.width;
            const height = canvas.height;
            const centerX = width / 2;
            const centerY = height / 2;
            const scale = Math.min(width, height) / 10;
            
            // Clear canvas
            ctx.clearRect(0, 0, width, height);
            
            // Draw grid and axes (similar to drawComplexPlane)
            ctx.strokeStyle = 'rgba(255, 255, 255, 0.2)';
            ctx.lineWidth = 1;
            
            for (let x = centerX % scale; x < width; x += scale) {
                ctx.beginPath();
                ctx.moveTo(x, 0);
                ctx.lineTo(x, height);
                ctx.stroke();
            }
            
            for (let y = centerY % scale; y < height; y += scale) {
                ctx.beginPath();
                ctx.moveTo(0, y);
                ctx.lineTo(width, y);
                ctx.stroke();
            }
            
            ctx.strokeStyle = 'rgba(255, 255, 255, 0.8)';
            ctx.lineWidth = 2;
            
            ctx.beginPath();
            ctx.moveTo(0, centerY);
            ctx.lineTo(width, centerY);
            ctx.stroke();
            
            ctx.beginPath();
            ctx.moveTo(centerX, 0);
            ctx.lineTo(centerX, height);
            ctx.stroke();
            
            // Draw origin
            ctx.fillStyle = 'white';
            ctx.beginPath();
            ctx.arc(centerX, centerY, 4, 0, Math.PI * 2);
            ctx.fill();
            
            // Draw opZ
            const zX = centerX + opZ.real * scale;
            const zY = centerY - opZ.imag * scale;
            
            ctx.fillStyle = '#00ccff';
            ctx.beginPath();
            ctx.arc(zX, zY, 6, 0, Math.PI * 2);
            ctx.fill();
            
            ctx.strokeStyle = '#00ccff';
            ctx.lineWidth = 2;
            ctx.beginPath();
            ctx.moveTo(centerX, centerY);
            ctx.lineTo(zX, zY);
            ctx.stroke();
            
            ctx.fillStyle = '#00ccff';
            ctx.font = '14px Arial';
            ctx.fillText('z', zX + 10, zY - 10);
            ctx.fillText(opZ.toString(), zX + 10, zY + 5);
            
            // Draw opW
            const wX = centerX + opW.real * scale;
            const wY = centerY - opW.imag * scale;
            
            ctx.fillStyle = '#ff66aa';
            ctx.beginPath();
            ctx.arc(wX, wY, 6, 0, Math.PI * 2);
            ctx.fill();
            
            ctx.strokeStyle = '#ff66aa';
            ctx.lineWidth = 2;
            ctx.beginPath();
            ctx.moveTo(centerX, centerY);
            ctx.lineTo(wX, wY);
            ctx.stroke();
            
            ctx.fillStyle = '#ff66aa';
            ctx.font = '14px Arial';
            ctx.fillText('w', wX + 10, wY - 10);
            ctx.fillText(opW.toString(), wX + 10, wY + 5);
            
            // Draw result if exists
            if (opResult) {
                const rX = centerX + opResult.real * scale;
                const rY = centerY - opResult.imag * scale;
                
                ctx.fillStyle = '#ffcc00';
                ctx.beginPath();
                ctx.arc(rX, rY, 6, 0, Math.PI * 2);
                ctx.fill();
                
                ctx.strokeStyle = '#ffcc00';
                ctx.lineWidth = 2;
                ctx.beginPath();
                ctx.moveTo(centerX, centerY);
                ctx.lineTo(rX, rY);
                ctx.stroke();
                
                ctx.fillStyle = '#ffcc00';
                ctx.font = '14px Arial';
                ctx.fillText('result', rX + 10, rY - 10);
                ctx.fillText(opResult.toString(), rX + 10, rY + 5);
            }
        }

        // Update displayed values for visualization module
        function updateDisplays() {
            document.getElementById('realValue').textContent = z.real.toFixed(2);
            document.getElementById('imagValue').textContent = z.imag.toFixed(2);
            document.getElementById('currentComplex').textContent = z.toString();
            
            if (transformed) {
                document.getElementById('transformedComplex').textContent = transformed.toString();
            } else {
                document.getElementById('transformedComplex').textContent = '-';
            }
        }

        // Update displayed values for operations module
        function updateOperationsDisplays() {
            document.getElementById('opRealValue').textContent = opZ.real.toFixed(2);
            document.getElementById('opImagValue').textContent = opZ.imag.toFixed(2);
            document.getElementById('opCurrentComplex').textContent = opZ.toString();
            document.getElementById('opWComplex').textContent = opW.toString();
            
            if (opResult) {
                document.getElementById('opResultComplex').textContent = opResult.toString();
            } else {
                document.getElementById('opResultComplex').textContent = '-';
            }
        }

        // Module switching
        document.querySelectorAll('.module-card').forEach(card => {
            card.addEventListener('click', function() {
                document.querySelectorAll('.module-card').forEach(c => c.classList.remove('active-module'));
                this.classList.add('active-module');
                
                const module = this.getAttribute('data-module');
                
                // Hide all module contents
                document.querySelectorAll('.module-content').forEach(content => {
                    content.classList.remove('active');
                });
                
                // Show selected module content
                document.querySelector(`.${module}-content`).classList.add('active');
                
                // Redraw the appropriate canvas
                if (module === 'visualization') {
                    drawComplexPlane();
                } else if (module === 'operations') {
                    drawOperationsPlane();
                }
            });
        });

        // Event listeners for visualization module
        document.getElementById('realPart').addEventListener('input', function() {
            z.real = parseFloat(this.value);
            transformed = null;
            updateDisplays();
            drawComplexPlane();
        });
        
        document.getElementById('imagPart').addEventListener('input', function() {
            z.imag = parseFloat(this.value);
            transformed = null;
            updateDisplays();
            drawComplexPlane();
        });
        
        document.getElementById('add').addEventListener('click', function() {
            transformed = z.add(w);
            updateDisplays();
            drawComplexPlane();
        });
        
        document.getElementById('multiply').addEventListener('click', function() {
            transformed = z.multiply(w);
            updateDisplays();
            drawComplexPlane();
        });
        
        document.getElementById('conjugate').addEventListener('click', function() {
            transformed = z.conjugate();
            updateDisplays();
            drawComplexPlane();
        });
        
        document.getElementById('reset').addEventListener('click', function() {
            z = new ComplexNumber(2, 1.5);
            transformed = null;
            document.getElementById('realPart').value = z.real;
            document.getElementById('imagPart').value = z.imag;
            updateDisplays();
            drawComplexPlane();
        });
        
        document.getElementById('rotate90').addEventListener('click', function() {
            const i = new ComplexNumber(0, 1);
            transformed = z.multiply(i);
            updateDisplays();
            drawComplexPlane();
        });
        
        document.getElementById('rotate180').addEventListener('click', function() {
            const minusOne = new ComplexNumber(-1, 0);
            transformed = z.multiply(minusOne);
            updateDisplays();
            drawComplexPlane();
        });
        
        document.getElementById('scale2').addEventListener('click', function() {
            const two = new ComplexNumber(2, 0);
            transformed = z.multiply(two);
            updateDisplays();
            drawComplexPlane();
        });
        
        document.getElementById('reflectX').addEventListener('click', function() {
            transformed = z.conjugate();
            updateDisplays();
            drawComplexPlane();
        });

        // Event listeners for operations module
        document.getElementById('opRealPart').addEventListener('input', function() {
            opZ.real = parseFloat(this.value);
            opResult = null;
            updateOperationsDisplays();
            drawOperationsPlane();
        });
        
        document.getElementById('opImagPart').addEventListener('input', function() {
            opZ.imag = parseFloat(this.value);
            opResult = null;
            updateOperationsDisplays();
            drawOperationsPlane();
        });
        
        document.getElementById('opAdd').addEventListener('click', function() {
            opResult = opZ.add(opW);
            updateOperationsDisplays();
            drawOperationsPlane();
        });
        
        document.getElementById('opSubtract').addEventListener('click', function() {
            opResult = opZ.subtract(opW);
            updateOperationsDisplays();
            drawOperationsPlane();
        });
        
        document.getElementById('opMultiply').addEventListener('click', function() {
            opResult = opZ.multiply(opW);
            updateOperationsDisplays();
            drawOperationsPlane();
        });
        
        document.getElementById('opDivide').addEventListener('click', function() {
            opResult = opZ.divide(opW);
            updateOperationsDisplays();
            drawOperationsPlane();
        });

        // Quiz functionality
        document.querySelectorAll('.quiz-option').forEach(option => {
            option.addEventListener('click', function() {
                const isCorrect = this.getAttribute('data-correct') === 'true';
                
                document.querySelectorAll('.quiz-option').forEach(opt => {
                    opt.classList.remove('correct', 'incorrect');
                    if (opt.getAttribute('data-correct') === 'true') {
                        opt.classList.add('correct');
                    } else {
                        opt.classList.add('incorrect');
                    }
                });
                
                if (isCorrect) {
                    setTimeout(() => {
                        const questions = [
                            "What happens when you multiply a complex number by its conjugate?",
                            "How does the argument change when you multiply two complex numbers?",
                            "What is the geometric effect of adding two complex numbers?",
                            "How many complex roots does a quadratic equation have?"
                        ];
                        const randomQuestion = questions[Math.floor(Math.random() * questions.length)];
                        document.getElementById('quizQuestion').textContent = randomQuestion;
                        
                        document.querySelectorAll('.quiz-option').forEach(opt => {
                            opt.classList.remove('correct', 'incorrect');
                        });
                    }, 2000);
                }
            });
        });

        // Initialize
        updateDisplays();
        updateOperationsDisplays();
        drawComplexPlane();
        drawOperationsPlane();

        // Redraw when window is resized
        window.addEventListener('resize', function() {
            drawComplexPlane();
            drawOperationsPlane();
        });

        // Start exploring button
        document.getElementById('startExploring').addEventListener('click', function() {
            alert("Great! Start by moving the sliders to change the complex number, then try the different operations to see their geometric effects.");
        });

        // Take tour button
        document.getElementById('takeTour').addEventListener('click', function() {
            alert("Welcome to the Complex Explorer tour! We'll explore:\n\n1. The complex plane and how to represent numbers\n2. Basic operations and their geometric meanings\n3. Interesting patterns and properties\n\nUse the module buttons at the top to navigate between different learning areas.");
        });

        // Discovery panel buttons
        document.getElementById('explorePowers').addEventListener('click', function() {
            const resultDiv = document.getElementById('powersResult');
            resultDiv.innerHTML = `
                <p>Let's explore powers of i:</p>
                <p>i¬π = i</p>
                <p>i¬≤ = -1</p>
                <p>i¬≥ = -i</p>
                <p>i‚Å¥ = 1</p>
                <p>i‚Åµ = i (and the pattern repeats!)</p>
                <p>This cyclical pattern repeats every 4 powers. Try calculating higher powers of i!</p>
            `;
            resultDiv.style.display = 'block';
        });
        
        document.getElementById('exploreConjugates').addEventListener('click', function() {
            const resultDiv = document.getElementById('conjugatesResult');
            resultDiv.innerHTML = `
                <p>When you multiply a complex number by its conjugate, you always get a real number!</p>
                <p>For z = a + bi, z * conjugate(z) = a¬≤ + b¬≤</p>
                <p>This is always a non-negative real number. Try it with different complex numbers!</p>
            `;
            resultDiv.style.display = 'block';
        });
        
        document.getElementById('exploreRoots').addEventListener('click', function() {
            const resultDiv = document.getElementById('rootsResult');
            resultDiv.innerHTML = `
                <p>Every non-zero complex number has exactly n distinct n-th roots!</p>
                <p>For example, a complex number has 2 square roots, 3 cube roots, etc.</p>
                <p>These roots are equally spaced around a circle in the complex plane. Try finding the square roots of different numbers!</p>
            `;
            resultDiv.style.display = 'block';
        });
    </script>
</body>
</html>
